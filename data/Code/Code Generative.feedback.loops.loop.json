{"text": "import Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs groupId=\"languages\">\n<TabItem value=\"py\" label=\"Python\">\n\n```python\ngeneratePrompt = \"\"\"\nPlease write an engaging advertisement for the following AirBnb Listing:\nDescription: {description}\n\"\"\"\n\n\nads = client.query\\\n           .get(\"Listing\", [\"description\", \"room_type\", \"neighbourhood\"])\\\n           .with_generate(single_prompt=generatePrompt)\\\n           .with_additional([\"id\"])\\\n           .with_limit(5)\\\n           .do()[\"data\"][\"Get\"][\"Listing\"]\n\nfor ad in ads:\n new_ad_properties = {\n     \"content\": ad[\"_additional\"][\"generate\"][\"singleResult\"]\n }\n new_ad_id = get_valid_uuid(uuid4())\n client.data_object.create(\n     data_object = new_ad_properties,\n     class_name = \"Ad\",\n     uuid = new_ad_id\n )\n client.data_object.reference.add(\n     from_uuid = ad[\"_additional\"][\"id\"],\n     from_property_name = \"hasAd\",\n     to_uuid = new_ad_id\n )\n```\n\n</TabItem>\n\n<TabItem value=\"ts\" label=\"TypeScript\">\n\n```ts\nconst generate_prompt: string = 'Please write a description for the following AirBnB Listing in English. NAME: {name} HOST_NAME {host_name} NEIGHBOURHOOD {neighbourhood} NEIGHBOURHOOD_GROUP {neighbourhood_group} PRICE {price}. Please do not make up any information about the property in your description.';\n\nconst properties_str = 'name host_name neighbourhood neighbourhood_group price _additional{ id }';\n\nclient.graphql\n  .get()\n  .withClassName('Listing')\n  .withFields(properties_str)\n  .withGenerate({\n    singlePrompt: generate_prompt,\n  })\n  .withLimit(5)\n  .do()\n  .then(results => {\n    //loop through results to add to `generated_descriptions`\n    let generated_data = results[\"data\"][\"Get\"][\"Listing\"];\n    for (let i = 0; i < 5; i++) {\n      let uuid = generated_data[i][\"_additional\"][\"id\"];\n      let generated_result = generated_data[i][\"_additional\"][\"generate\"][\"singleResult\"];\n      let new_description_property = {\n        \"description\": generated_result\n      };\n      console.log(new_description_property);\n      client.data\n        .getterById()\n        .withClassName('Listing')\n        .withId(uuid)\n        .do()\n        .then(res => {\n          client.data\n            .updater()\n            .withId(uuid)\n            .withClassName('Listing')\n            .withProperties(new_description_property)\n            .do();\n        })\n        .then(res => {\n          console.log(res)\n        })\n        .catch(err => {\n          console.error(err)\n        });\n    }\n  })\n  .catch(err => {\n    console.error(err);\n  });\n```\n\n</TabItem>\n</Tabs>\n", "type": "Code", "name": "Code Generative.feedback.loops.loop", "path": "_includes/code/generative.feedback.loops.loop.mdx", "link": "https://weaviate.io/_includes/code/generative.feedback.loops.loop", "timestamp": "2024-05-08 15:30:50", "reader": "JSON", "meta": {}, "chunks": []}