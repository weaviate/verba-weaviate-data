{"text": "This video shows how to use the Weaviate python client. A simple example dataset of ABC News Headlines is used. The video ... \nhello welcome to this umpresentation of the vva python clientandyeah i'm set out here to um just give alittle bit of an introduction into theclient and alsoto show how a vba project how is such asemantic analysis oryeah some some kind of interestingproject using vvatecould start out in a python environmentandobviously we have to start with gettingsome data in so ichose this data set here a million newsheadlinesone reason is that it's very simple soyou're going to be able to follow alongvery easily and it is also notum from the sheer size of it not too bigso we're not going to sit here foreverum and it's uh yeahso obviously in a production environmentwe could just scale up vv8 andget also much much more data in but in alocal environment i think this is anice starting data setso yeah let's get right into it thefirst thing we want to have isobviously we would need to import vv8 wecan just pipinstall it with a vv8 clientand then we need to get the data in andlet's have a look at this data frameand we see right away we have twocolumnsone is really just a news headlineand one is a publish date sowhen we think about the semanticcontext of a news headline uh therethere is actually a little bit of aproblem depending on how the newspaperworksthe headline itself might not reallyindicatewhat the article itself is really aboutsoum in a more yeahmore serious attempt to maybe getinformation out of news sites or newsarticleswe probably want to add much more thanjust the headline tobuild a bigger context and get much muchmore concreteinformation and just help to build away bigger context so the more data thebetterusually all right but this out of theway let's justget in so the first thing we want tohave is obviously we need a clientso we're just going to use so we havevv8 imported here sowe can use itand get a client objectclient soand i have this running on the localhostand just to see what's running herewe gonna get the meter in pointand as you can see i run 22.19 at themomentand i'm running on this contentionaryenglish contentionaryso i'm running the most current versionthat is currently out thereat the time i'm recording thisand yeah so now we have a pipea client object and the client object isactuallycreated in a way where you canfind all the um yeahapi groups directly under it sofor example with a schema we have queryvery things like batching andclassification and obviously the dataobjects to just add andremove things sothe ide that is a little bithelping you with uh showing youvarious functions that are available youshould bevery very quickly get into it orotherwise you can obviously check outourdocumentation it's very elaborate on howthe client worksall right the next thing we need is aschemaand yeah i created a small schema hereum let's have a look at this itactually just creates one classand i call this news for for the momentit doesn't really matterand then we haveone property text with the headlineand the headline is obviously veryimportant for us at this in thisexample because we have um it theheadline itself gives theuh context of the entire class andbecause it's the onlyreal text value and then we haveum a year and a month so we see here thedate which isum yeah this uh numberum it's formatted as a as an integerso we're gonna split this up inin in the year in the month andwhen we have this stick created so wecan just use anative python dict because it's socompatible toto the json format it shouldn't be a bigproblemto use this and then we can go withclientdot shima dot createand then add the schema andthere we go so we have loaded the schemaand yeah now the next thing is we wantto get some data in so we want to getthis data frame just that we don't haveto scroll all the time let's just openit here againso we want to have the headlines inthere and we want to splitthis date up into the year and the monthso yeah i'm gonna use batching for thisbecausewe just want to speed up the loadingprocess solet's create a batch andfor the batching we have this specialbatching object that just collectssingle things and then we can committhis in in one goto vb8 and load everything in one go sothat's um a things batch requestlet's create another object of this andthen let's say wehave a batch sizeof maybe a thousand sothis is a little bit depending on howbig your objects are actually areand and since i'm on a local machinei can choose a very big batch size andif youchoose a two big batch size in a in amore productive environment you mightwannauh you might run into timeouts orsomething like this then you can eitheradjust the timeout settings or you haveto reduce your pet size a little bitso or you horizontally scaleand just make smaller batch sizes andhorizontally scale it out something likethisall right and then the next thing wewant to do is we want to go over each oftheserows and create um an object for thatright solet's just go for index and rowin data frame dot eaterrowsand then we go we we gonna create adictionary that represents this objectsoit's gonna need like a headline a yearand a month all rightand we call that newsso headlineand we can actually just umget actually this headlineand yeah for the year and a month i'mgonna just copy this in now because itit's not too interesting when i'm typingso what i'm gonna do here is just iuse the publish date and then i'm gonnause the firstfour digits for the year and thenlike the middle two here umfor the month all right and then we havea new stick so this is ourthing that we want to add and then wehave to add it to the batch solet's add thing and thenwe're gonna take the newsdict and alsoum say the class so this is just here wecall this class news soi'm gonna also say that this is of typeclass news rightall right and that's basically it now wejust have to commit the batch every oncein a whileso let's go ahead and say the patch sizeof every 1 000 batches uh every 1000thingsi mean we're gonnaprint the index and then we're gonnaclient dotbatch dot createthings and thenalso add our patch andyeah then we're gonna create a new batchbecauseotherwise we're gonna just append on thesame page over and over again and that'sobviously not what we want we want tohave a new batchand then also when this is because weare not finishing on a perfectuh part of 1000 so let's justrun this commit message againyeah and that should do it let's runthis and we see it's loadingand the loading is going to take a whilesoi'm just gonna jump aheadand see you in a few seconds when thisis loadedalright so we are back now andeverything is loadedand yeah so we see here the output ofthe last batch actuallyjust a quick note on this obviouslythere is much more to this function soa lot of these client functions theyhave optional properties thattry to set sensible default values butobviously you cancustomize all kind of things and also wedon't do a lot ofactually we don't do any errormanagement here or checking of the iftheloading was actually successful we justassumed that and it's also pretty safeto assume since thedata set is very yeahlimited and also our schema andeverything is very limited so there isnot a lot of space for errorbut yeah obviously you could in a in amore productive environment you want towant to check if everythingwas successful as you assumed so nowlet's have a look atum what we want to do next so we want togoand query this data and here we have uhthe query we're going to use so actuallywe're going tosay all right we um want to have thisour things we just loaded andwe want to be able to filter them basedonyear and month so we want to have amonthly baseand yeah we gonnaalso do an explore search so so to findtheclosest things that are umconnected to this concept so i chose theconcept dancing here and we seeum on the right that we actually getsomething about balletballet and uh dance production but wealso see already a problem with our dataset sofor example it seems that this oneheadline here is loaded twiceso um there might need to be a littlebit so we work a little bit with dirtydata here thatmight need some cleaning up actuallyall right and also with the data setlet's let's say um this is a little bitcherry picked here we see there isactually something connected to dancebut if we let's look at the next monthsowe see there is no real connection tothen so it's choosing something that isstill connected to dancing as a conceptso something like arts or musicum are still pretty close to dancing butobviously those are not things that aredirectlyover um dancing itself so umyeah we we see that the confidenceor certainty in this this case alsogoes down um to reflect that theseuh things are not con that deeplyconnected to our conceptall right so how can we get thisquery in here soto create the wear and explore filter wejust gonnatranslate these filters directly into apython dictso we're gonna say operator this is justbecoming a string and it's becoming astring this isstaying a list of strings and so we canbasically want to one translate thatinto a python filteruh a python dict and yeah how this isgonna look like it's justlet me copy this in here sothis is just really one to one these twofiltersand then i'm gonna package those into anice functionand that is gonna allow us to search fora concept based on the year and themonthand now we're gonna connect theseum actually we're gonna build thisentire query hereusing a query builder so we're gonna gowith the client againand query and then we gonna getthingsand here we wanna have the news classand we gonna say solet's have a look in into this again soget thingsnews class and then we're gonna statewhat we want to have here so here wehave everything year month headline andthis underscore property certainty butfor our python code here we got justgoing to be interested in the certaintyand then we say we want to have thiswith an explorerand we're gonna add our explore filterdict and then we also want to have awith whereand we're gonna add the where filter andwe're gonna alsosay limit this to the top 100um results and then we're gonnaexecute with do and since this is afunctionwe wanna turn uhreturn this entire thing that is comingfrom this query all rightlet's uh just try this outexplore headlineslet's stay with them thingthenand 2008 we hadand marchand then we see this is how a resultlooked like sowe have this umjson level here and data getthings news and then we just have a longlist of resultswith the certainty soand then i created a smallfunction that is using this long listhereand creates an average of it so let'sremove this andpaste this function in so we have getaverage certaintywhich calls our just created queryand yeah we just gonnasum this up and then returnthe average all rightand in the next step we're gonnado this for all the years and months inthis data set so we're gonna gothrough the years and through the monthand then you get the average certaintyand we just gonna put this into a newpythonum pandas data frameso that we can easily explore it andplot it so yeah theum i use thisconcept here global finance crisis banksreal estateit doesn't really matter how the wordsare orderedit's just about the concept they createthe kind of space they createand yeah then we can have alook at this data frame and we see thenwe have now for every month sobecause we convert here the date into uhthis pandas date it says just as thefirst of everymonth but we know it's an aggregation ofthe entire monthso and then we have the averagedistancesum to the concept to this concept hereall right and if we now plot thisthen hopefully we see that there isactually quite a spikein uh yeah 2007 2008where this is the headlines are muchmoreconnected to um yeah this kind ofconceptobviously because there was the globalfinancial crisisbased on real estate speculationsand yeah but we see still quite someproblems here so for example this isquite noisywe also see that there are two uhkind of low peaks and um i investigatedthisa little bit in beforehand so forexample what happens hereon these two peaks uh is that thoseparticular month have much less datathan uh the other months soin this case uh what happens here ismaybe there is justless news articles so it's not reallyaboutsince we create an average we wouldstill umshould still get kind of dissimilar butmaybe just the theeconomic section is missing right so ifthe economic sectionheadlines is missing completely then wejust get things that are kind ofconnected toi don't know maybe uh maybe crisis orbanks as it can be any anything in anyuh other um yeahsection and then we get these kind of uhproblems so we see that data set ismaybe notideal for this kind of analysis so wewould have to clean this up a little bitfind out what what the problems are hereand thenwhen we have like a very nice noisy areaherei would say this is probably because wejust use headlines our context is madeoutby very small settings and as i saidbefore let'slet's imagine somebody is speaking hereactually about the crisis but theheadline is something likehow we gonna go forward from this or umthe unexpected winners of our currentsituationthis kind of headlines don't reallysay anything about the textabout the the article itself even thoughfor the people at that timeit might have made sense because it wasin the context of the timebut yeah for us it would be very helpfulif we would have really the entire textbut then thisdata loading and the example would be alittle bit more elaborate also theschema gets more complicatedso i just wanted to have this small umthing to get started and i hope thisshows you how quickly you actually canget to kind of a graph to to get anexploration of youruh data and to see that actually theclient is very very straightforward sojust uhusing the api groups just uh yeahusing it how how you would uh in nativepythonpython so i hope that youenjoyed this and i hope you give vv8 atry in the python clientand i'm really interested for yourfeedback soleave a github issue orjoin our community slack orjust write something on stack overflowwe are very active on all thesethings so um yeah thank you for watchingand see you soon", "type": "Video", "name": "Using the Weaviate Python client for News Headlines", "path": "", "link": "https://www.youtube.com/watch?v=oN2WKHLYKCc", "timestamp": "", "reader": "JSON", "meta": {}, "chunks": []}