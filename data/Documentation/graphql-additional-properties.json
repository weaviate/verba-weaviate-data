{"text": "\n\n\n\n\n## Introduction\n\nGraphQL additional properties can be used on data objects in Get{} Queries to get additional information about the returned data objects. Which additional properties are available depends on the modules that are attached to Weaviate. The fields `id`, `vector`, `certainty`, `featureProjection` and `classification` are available from Weaviate Core. On nested GraphQL fields (references to other data classes), only the `id` can be returned. Explanation on specific additional properties can be found on the module pages, see for example `text2vec-contextionary`.\n\n## Example\n\nAn example query getting the UUID and the distance.\n\n\n\n\n\n  Expected response\n\n```json\n{\n  \"data\": {\n    \"Get\": {\n      \"Article\": [\n        {\n          \"_additional\": {\n            \"distance\": 0.15422738,\n            \"id\": \"e76ec9ae-1b84-3995-939a-1365b2215312\"\n          },\n          \"title\": \"How to Dress Up For an Untraditional Holiday Season\"\n        },\n        {\n          \"_additional\": {\n            \"distance\": 0.15683109,\n            \"id\": \"a2d51619-dd22-337a-8950-e1a407dab3d2\"\n          },\n          \"title\": \"2020's biggest fashion trends reflect a world in crisis\"\n        },\n        ...\n      ]\n    }\n  }\n}\n```\n\n\n\n## _additional property\n\nAll additional properties can be set in the reserved `_additional{}` property.\n\nFor example:\n\n```graphql\n{\n  Get {\n    Class {\n      property\n      _additional {\n        # property 1\n        # property 2\n        # etc...\n      }\n    }\n  }\n}\n```\n\n### id\n\nThe `id` field contains the unique UUID of the data object.\n\n```graphql\n{\n  Get {\n    Class {\n      property\n      _additional {\n        id\n      }\n    }\n  }\n}\n```\n\n### vector\n\nThe `vector` fields contains the vector representation of the data object\n\n```graphql\n{\n  Get {\n    Class {\n      property\n      _additional {\n        vector\n      }\n    }\n  }\n}\n```\n\n\n### generate\n\n\nThe `generate` field can be used to perform a generative search.\n\n```graphql\n{\n  Get {\n    Class {\n      property\n      _additional {\n        generate(\n          singleResult: {\n            prompt: \"\"\"\n            LLM Prompt:\n\n            {property_a} - {property_b}\n            \"\"\"\n          }\n        ) {\n          singleResult\n          error\n        }\n      }\n    }\n  }\n}\n```\n\n\n### rerank\n\n\nThe `rerank` field can be used to reorder the search results. It accepts two parameters:\n\n| Parameter    | Required | Type       | Description  |\n|--------------|----------|------------|--------------|\n| `property`   | yes      | `string`   | Which property to pass to the reranker. For example, you may want to run a similarity search on a Products collection, then rerank specifically on the Name field. |\n| `query`      | no       | `string`    | Optionally specify a different query. |\n\nSyntax:\n\n```graphql\n{\n  Get {\n    Class {\n      property\n      _additional {\n        rerank(\n          property: \"...\"\n          query: \"...\"\n        ) {\n          score\n        }\n      }\n    }\n  }\n}\n```\n\n### creationTimeUnix\n\nThe `creationTimeUnix` field is the timestamp of when the data object was created.\n\n```graphql\n{\n  Get {\n    Class {\n      property\n      _additional {\n        creationTimeUnix\n      }\n    }\n  }\n}\n```\n\n### lastUpdateTimeUnix\n\nThe `lastUpdateTimeUnix` field is the timestamp of when the data object was last updated.\n\n```graphql\n{\n  Get {\n    Class {\n      property\n      _additional {\n        lastUpdateTimeUnix\n      }\n    }\n  }\n}\n```\n\n### distance\n\nAny time a vector search is involved, the `distance` can be displayed to show\nthe distance between the query vector and each result. The distance is the raw\ndistance metric that was used as part of the vector search. For example, if the\ndistance metric is `cosine`, distance will return a number between 0 and 2. See\nthe full overview of [distance metrics and the expected distance\nranges](/developers/weaviate/config-refs/distances.md).\n\nA distance would be typical in any place that you retrieve objects using a\nvector, for example `Get {}` with `nearObject`, `nearVector`, or `near`.\nThe results are ordered by the ascending distance - unless you explicitly sort\nby another property.\n\nA lower value for a distance always means that two vectors are closer to\nanother, than a higher value. Depending on the distance metric used, this can\nalso mean that distances would return negative values. For example, if dot\nproduct distance is used, a distance of `-50` would indicate more similarity\nbetween a vector pair than `20`. See [the distances\npage](/developers/weaviate/config-refs/distances.md) for details and exact\ndefinitions.\n\n*Note that the distance field was introduced in `v1.14.0`.*\n\n#### Certainty (only for cosine distance)\n\nPrior to `v1.14`, certainty was the only way to display vector similarity in\nthe results. `certainty` is an opinionated measure that always returns a number\nbetween 0 and 1. It is therefore only usable with fixed-range distance metrics,\nsuch as `cosine`.\n\nFor a class with `cosine` distance metrics, the `certainty` is a\nnormalization of the distance using the formula:\n\n```\ncertainty = 1 - distance/2\n```\n\nGiven that a cosine distance is always a number between 0 and 2, this will\nresult in certainties between 0 and 1, with 1 indicating identical vectors, and\n0 indicating opposing angles. This definition only exists in an angular space.\n\n### Classification\n\nWhen a data-object has been subjected to classification, you can get additional information about how the object was classified by running the following command:\n\n\n\n\n### Feature Projection\n\nBecause Weaviate stores all data in a vector space, you can visualize the results according to the results of your query. The feature projection is intended to reduce the dimensionality of the object's vector into something easily suitable for visualizing, such as 2d or 3d. The underlying algorithm is exchangeable, the first algorithm to be provided is t-SNE.\n\nTo tweak the feature projection optional parameters (currently GraphQL-only) can be provided. The values and their defaults are:\n\n| Parameter | Type | Default | Implication |\n|--|--|--|--|\n| `dimensions` | `int` | `2` | Target dimensionality, usually `2` or `3` |\n| `algorithm` | `string` | `tsne` | Algorithm to be used, currently supported: `tsne` |\n| `perplexity` | `int` | `min(5, len(results)-1)` | The `t-SNE` perplexity value, must be smaller than the `n-1` where `n` is the number of results to be visualized |\n| `learningRate` | `int` | `25` | The `t-SNE` learning rate |\n| `iterations` | `int` | `100` | The number of iterations the `t-SNE` algorithm runs. Higher values lead to more stable results at the cost of a larger response time |\n\nAn example with default settings:\n\n\n\n\n\n  Expected response\n\n```json\n{\n  \"data\": {\n    \"Get\": {\n      \"Article\": [\n        {\n          \"_additional\": {\n            \"featureProjection\": {\n              \"vector\": [\n                -115.17981,\n                -16.873344\n              ]\n            }\n          },\n          \"title\": \"Opinion | John Lennon Told Them \\u2018Girls Don\\u2019t Play Guitar.\\u2019 He Was So Wrong.\"\n        },\n        {\n          \"_additional\": {\n            \"featureProjection\": {\n              \"vector\": [\n                -117.78348,\n                -21.845968\n              ]\n            }\n          },\n          \"title\": \"Opinion | John Lennon Told Them \\u2018Girls Don\\u2019t Play Guitar.\\u2019 He Was So Wrong.\"\n        },\n        ...\n      ]\n    }\n  }\n}\n```\n\n\n\nThe above result can be plotted as follows (where the result in red is the first result):\n\nWeaviate T-SNE example\n\n#### Best practices and notes\n* There is no request size limit (other than the global 10,000 items request limit) which can be used on a `featureProjection` query. However, due to the O(n^2) complexity of the `t-SNE` algorithm, large requests size have an exponential effect on the response time. We recommend to keep the request size at or below 100 items, as we have noticed drastic increases in response time thereafter.\n* Feature Projection happens in real-time, per query. The dimensions returned have no meaning across queries.\n* Currently only root elements (not resolved cross-references) are taken into consideration for the featureProjection.\n* Due to the relatively high cost of the underlying algorithm, we recommend to limit requests including a `featureProjection` in high-load situations where response time matters. Avoid parallel requests including a `featureProjection`, so that some threads stay available to serve other, time-critical requests.\n\n\n\n\n", "type": "Documentation", "name": "graphql-additional-properties", "path": "developers/weaviate/api/graphql/additional-properties.md", "link": "https://weaviate.io/developers/weaviate/api/graphql/additional-properties", "timestamp": "2023-11-13 10:40:02", "reader": "JSON", "meta": {}, "chunks": []}