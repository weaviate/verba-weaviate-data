{"text": "\n\n## Overview\n\nThe `text2vec-cohere` module enables Weaviate to obtain vectors using Cohere.\n\nKey notes:\n\n- As it uses a third-party API, you will need an API key.\n- **Its usage may incur costs**.\n    - Please check the Cohere pricing page, especially before vectorizing large amounts of data.\n- This module is available on Weaviate Cloud Services (WCS).\n- Enabling this module will enable the `nearText` search operator.\n- The default model is `embed-multilingual-v3.0`.\n- Set the appropriate distance metric in your class configuration, depending on the model used.\n\n\n\n\n## Weaviate instance configuration\n\nThis module is enabled and pre-configured on Weaviate Cloud Services.\n\n### Docker Compose file\n\nTo use `text2vec-cohere`, you must enable it in your Docker Compose file (`docker-compose.yml`). You can do so manually, or create one using the Weaviate configuration tool.\n\n#### Parameters\n\n- `ENABLE_MODULES` (Required): The modules to enable. Include `text2vec-cohere` to enable the module.\n- `DEFAULT_VECTORIZER_MODULE` (Optional): The default vectorizer module. You can set this to `text2vec-cohere` to make it the default for all classes.\n- `COHERE_APIKEY` (Optional): Your Cohere API key. You can also provide the key at query time.\n\n#### Example\n\nThis configuration enables `text2vec-cohere`, sets it as the default vectorizer, and sets the API keys.\n\n```yaml\n---\nversion: '3.4'\nservices:\n  weaviate:\n    image: semitechnologies/weaviate:||site.weaviate_version||\n    restart: on-failure:0\n    ports:\n     - 8080:8080\n     - 50051:50051\n    environment:\n      QUERY_DEFAULTS_LIMIT: 20\n      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'\n      PERSISTENCE_DATA_PATH: \"./data\"\n      # highlight-start\n      ENABLE_MODULES: text2vec-cohere\n      DEFAULT_VECTORIZER_MODULE: text2vec-cohere\n      COHERE_APIKEY: sk-foobar # Setting this parameter is optional, you can also provide the API key at query time.\n      # highlight-end\n      CLUSTER_HOSTNAME: 'node1'\n...\n```\n\n## Class configuration\n\nYou can configure how the module will behave in each class through the Weaviate schema.\n\n### API settings\n\n#### Parameters\n\n| Parameter | Required | Default | Purpose |\n| :- | :- | :- | :- |\n| `model` | No | `embed-multilingual-v3.0` | The model to use. |\n| `truncate` | No | `END` | Sets Cohere API input truncation behavior (`NONE`, `START` or `END` - read more). |\n| `baseURL` | No | `https://api.cohere.ai` | Sets a proxy or other URL instead of the default URL.  Use a the protocol domain format: `https://your.domain.com`. |\n\n#### Example\n\nThe following example configures the `Document` class by setting the vectorizer to `text2vec-cohere`, distance metric to `cosine`, model to `embed-multilingual-v3.0` and without input truncation by the Cohere API.\n\nDifferent Cohere models use different distance metrics. Make sure to set this accordingly. See the distance metric section for more information.\n\n```json\n{\n  \"classes\": [\n    {\n      \"class\": \"Document\",\n      \"description\": \"A class called document\",\n      // highlight-start\n      \"vectorizer\": \"text2vec-cohere\",\n      \"vectorIndexConfig\": {\n        \"distance\": \"cosine\"\n      },\n      \"moduleConfig\": {\n        \"text2vec-cohere\": {\n          \"model\": \"embed-multilingual-v3.0\", // Defaults to embed-multilingual-v3.0 if not set\n          \"truncate\": \"END\", // Defaults to END if not set\n          \"baseURL\": \"https://proxy.yourcompanydomain.com\"  // Optional. Can be overridden by one set in the HTTP header.\n        }\n      },\n      // highlight-end\n    }\n  ]\n}\n```\n\n### Vectorization settings\n\nYou can set vectorizer behavior using the `moduleConfig` section under each class and property:\n\n#### Class-level\n\n- `vectorizer` - what module to use to vectorize the data.\n- `vectorizeClassName` \u2013 whether to vectorize the class name. Default: `true`.\n\n#### Property-level\n\n- `skip` \u2013 whether to skip vectorizing the property altogether. Default: `false`\n- `vectorizePropertyName` \u2013 whether to vectorize the property name. Default: `false`\n\n#### Example\n\n```json\n{\n  \"classes\": [\n    {\n      \"class\": \"Document\",\n      \"description\": \"A class called document\",\n      \"vectorizer\": \"text2vec-cohere\",\n      \"vectorIndexConfig\": {\n        \"distance\": \"cosine\"\n      },\n      \"moduleConfig\": {\n        \"text2vec-cohere\": {\n          \"model\": \"embed-multilingual-v3.0\", // Defaults to embed-multilingual-v3.0 if not set\n          \"truncate\": \"END\", // Defaults to END if not set\n          // highlight-start\n          \"vectorizeClassName\": false\n          // highlight-end\n        }\n      },\n      \"properties\": [\n        {\n          \"name\": \"content\",\n          \"dataType\": [\"text\"],\n          \"description\": \"Content that will be vectorized\",\n          // highlight-start\n          \"moduleConfig\": {\n            \"text2vec-cohere\": {\n              \"skip\": false,\n              \"vectorizePropertyName\": false\n            }\n          }\n          // highlight-end\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Query-time parameters\n\nYou can supply parameters at query time by adding it to the HTTP header.\n\n| HTTP Header | Value | Purpose | Note |\n| :- | :- | :- | :- |\n| `\"X-Cohere-Api-Key\"` | `\"YOUR-COHERE-API-KEY\"` | Cohere API key | |\n| `\"X-Cohere-BaseURL\"` | `\"YOUR-COHERE-BASE-URL\"` | Cohere base URL | Available from version `v1.22.3` Use the protocol domain format: `https://your.domain.com`.  If specified, this will have precedence over the class-level setting. |\n\n## Additional information\n\n### Available models\n\nYou can use any of the following models with `text2vec-cohere` (source):\n\n- `embed-multilingual-v3.0` (Default)\n- `embed-multilingual-light-v3.0`\n- `embed-multilingual-v2.0`\n- `embed-english-v3.0`\n- `embed-english-light-v3.0`\n- `embed-english-v2.0`\n- `embed-english-light-v2.0`\n\nThe following models are available, but deprecated:\n- `multilingual-22-12`\n- `large`\n- `medium`\n- `small`\n\n`text2vec-cohere` defaults to the `embed-multilingual-v3.0` embedding model unless specified otherwise.\n\n`embed-multilingual-v2.0` reflects the new name.\n\n### Distance metric\n\nCohere's `embed-multilingual-v2.0` model uses dot product distances. With the `v3` models, you can use any distance metric (dot, cosine or Euclidean) (source).\n\nYou can see a list of supported distance metrics here.\n\n### Truncation\n\nIf the input text contains too many tokens and is not truncated, the Cohere API will throw an error. The Cohere API can be set to automatically truncate your input text.\n\nYou can set the truncation option with the `truncate` parameter to any of `\"NONE\"`, `\"START\"`, `\"END\"`. Passing `END` will discard the right side of the input, and passing `START` will discard the left side of the input. The remaining input is exactly the maximum input token length for the model. Cohere's default behavior is to truncate at the `END` if it is not set. (source)\n\n* The _upside_ of truncating is that a batch import always succeeds.\n* The _downside_ of truncating (i.e., `NONE`) is that a large text will be partially vectorized without the user being made aware of the truncation.\n\n### API rate limits\n\nSince this module uses your API key, your account's corresponding rate limits will also apply to the module. Weaviate will output any rate-limit related error messages generated by the API.\n\nMore information about Cohere rate limits can be found here.\n\n### Import throttling\n\nOne potential solution to rate limiting would be to throttle the import within your application. We include an example below.\n\n\n\n  See code example\n\n\n\n\n\n## Usage example\n\nThis is an example of a `nearText` query with `text2vec-cohere`.\n\n\n\n\n\n\n\n", "type": "Documentation", "name": "retriever-vectorizer-modules-text2vec-cohere", "path": "developers/weaviate/modules/retriever-vectorizer-modules/text2vec-cohere.md", "link": "https://weaviate.io/developers/weaviate/modules/retriever-vectorizer-modules/text2vec-cohere", "timestamp": "2024-02-08 20:23:19", "reader": "JSON", "meta": {}, "chunks": []}