{"text": "\nStarting in v1.22.5, [AWS Bedrock](https://aws.amazon.com/bedrock/) is supported.\n\nStarting in v1.24.1, [AWS Sagemaker](https://aws.amazon.com/sagemaker/) is supported.\n\nThe `text2vec-aws` module allows Weaviate to access [AWS Bedrock](https://aws.amazon.com/bedrock/) and [AWS Sagemaker](https://aws.amazon.com/sagemaker/) services.\n\nIf you need to run your own embedding service, use `Sagemaker`. `Bedrock` uses AWS models.\n\n## Considerations\n\n- This module is available on Weaviate Cloud Services (WCS).\n- `Bedrock` and `Sagemaker` are third party APIs. You must provide AWS API credentials.\n- `Bedrock` requires a model.\n    - There is no default `Bedrock` model set for this module.\n    - You must [request access](https://docs.aws.amazon.com/bedrock/latest/userguide/model-access.html) from AWS Bedrock to make models available in your account.\n    - Not all AWS Bedrock models are supported. See [Supported models](#supported-models).\n    - If you set `\"service\": \"bedrock\"``, set a model as well. For example, `\"model\": \"amazon.titan-embed-text-v1\"`\n    - Set a [distance metric](#distance-metric) in your class configuration that corresponds to the model you use.\n- These APIs may incur costs. Before vectorizing large amounts of data, check the pricing pages.\n    - [AWS Bedrock pricing](https://aws.amazon.com/bedrock/pricing/)\n    - [AWS Sagemaker](https://aws.amazon.com/sagemaker/pricing/)\n- Enabling this module enables the [`nearText`](/developers/weaviate/api/graphql/search-operators.md#neartext) search operator.\n\n\n\n\n### API Authentication\n\nYou must provide [access key based AWS credentials](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html) to use the API, including an AWS access key and a corresponding AWS secret access key. You can [set them as environment variables](#parameters), or [provide them at query time](#query-time-parameters).\n\n## Weaviate instance configuration\n\n### Docker Compose file\n\nTo use `text2vec-aws`, enable it in your Docker Compose file (`docker-compose.yml`).\n\n#### Parameters\n\n| Parameter | Type | Optional | Default | Description |\n| :-- | :-- | :-- | :-- | :-- |\n| `AWS_ACCESS_KEY` | string | yes | none | Your AWS access key. An alternative for `AWS_ACCESS_KEY_ID`. |\n| `AWS_ACCESS_KEY_ID` | string | yes | none | Your AWS access key. An alternative for `AWS_ACCESS_KEY`. |\n| `AWS_SECRET_KEY` | string | yes | none | Your AWS secret access key. An alternative for `AWS_SECRET_ACCESS_KEY`. |\n| `AWS_SECRET_ACCESS_KEY` | string | yes | none |Your AWS secret access key. An alternative for `AWS_SECRET_KEY`. |\n| `DEFAULT_VECTORIZER_MODULE` | string | yes | none | The default vectorizer module. To make `text2vec-aws` the default vectorizer, set this parameter to `text2vec-aws`.\n|`ENABLE_MODULES` | string | no | none | Set `text2vec-aws` to enable the module.\n|`SERVICE` | string | yes | `bedrock` | Must be `bedrock` or `sagemaker`.\n\n#### Example\n\nThis configuration does the following:\n\n- Enables the `text2vec-aws` vectorizer\n- Sets `text2vec-aws` as the default vectorizer\n- Sets AWS authentication credentials\n\n```yaml\n---\nversion: '3.4'\nservices:\n  weaviate:\n    image: cr.weaviate.io/semitechnologies/weaviate:||site.weaviate_version||\n    restart: on-failure:0\n    ports:\n     - 8080:8080\n     - 50051:50051\n    environment:\n      QUERY_DEFAULTS_LIMIT: 20\n      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'\n      PERSISTENCE_DATA_PATH: \"./data\"\n      # highlight-start\n      ENABLE_MODULES: text2vec-aws\n      DEFAULT_VECTORIZER_MODULE: text2vec-aws\n      AWS_ACCESS_KEY: sk-foobar  # Optional. Can be set at query time.\n      AWS_SECRET_KEY: sk-foobar  # Optional. Can be set at query time.\n      # highlight-end\n      CLUSTER_HOSTNAME: 'node1'\n...\n```\n\n## Class configuration\n\nTo configure module behavior for a collection, set collection level values in the [Weaviate schema](/developers/weaviate/manage-data/collections.mdx).\n\n### API settings\n\n#### Parameters\n\n| Parameter | Required | Default | Purpose |\n| :- | :- | :- | :- |\n| `model` | No | NONE | The model to use with `Bedrock`. See [supported models](/developers/weaviate/modules/retriever-vectorizer-modules/text2vec-aws.md#supported-models). |\n| `region` | Yes | NONE | AWS region name. For example, `us-east-1`. |\n\n#### Example\n\nThe following example configures the `Document` class to set the following parameters:\n\n- vectorizer: `text2vec-aws`\n- distance metric: `cosine`\n- service: `\"sagemaker\"`\n- endpoint: AWS provides this value when you configure `sagemaker`\n- AWS region: `us-east-1`\n\n```json\n{\n  \"classes\": [\n    {\n      \"class\": \"Document\",\n      \"description\": \"A class called document\",\n      // highlight-start\n      \"vectorizer\": \"text2vec-aws\",\n      \"vectorIndexConfig\": {\n        \"distance\": \"cosine\"\n      },\n      \"moduleConfig\": {\n        \"text2vec-aws\": {\n          \"model\": \"amazon.titan-embed-text-v1\",   // REQUIRED\n          \"region\": \"us-east-1\"                    // REQUIRED\n        }\n      },\n      // highlight-end\n    }\n  ]\n}\n```\n\n### Vectorizer settings\n\nTo configure vectorization for collections and properties, use the `moduleConfig` section in the collection definition.\n\n| Setting | Level | Default | Description |\n| :-- | :-- | :-- | :-- |\n| `vectorizer` | collection | none | The module that vectorizes the data. |\n| `vectorizeClassName`| collection | `true` | When `true`, vectorize the class name. |\n|`skip` | property | `false` | When `true`, does not vectorize the property. |\n| `vectorizePropertyName` | property | `false` | When `true`, does not vectorize the property name. |\n\n#### Example\n\n```json\n{\n  \"classes\": [\n    {\n      \"class\": \"Document\",\n      \"description\": \"A class called document\",\n      \"vectorizer\": \"text2vec-aws\",\n      \"vectorIndexConfig\": {\n        \"distance\": \"cosine\"\n      },\n      \"moduleConfig\": {\n        \"text2vec-aws\": {\n          \"model\": \"amazon.titan-embed-text-v1\",    // REQUIRED\n          \"region\": \"us-east-1\"                     // REQUIRED\n          // highlight-start\n          \"vectorizeClassName\": false\n          // highlight-end\n        }\n      },\n      \"properties\": [\n        {\n          \"name\": \"content\",\n          \"dataType\": [\"text\"],\n          \"description\": \"Content that will be vectorized\",\n          // highlight-start\n          \"moduleConfig\": {\n            \"text2vec-aws\": {\n              \"skip\": false,\n              \"vectorizePropertyName\": false\n            }\n          }\n          // highlight-end\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Query-time parameters\n\nTo supply parameters at query time, adding them to the HTTP header.\n\n| HTTP Header | Value | Purpose |\n| :- | :- | :- |\n| `\"X-AWS-Access-Key\"` | `\"YOUR-AWS-API-ACCESS-KEY\"` | Your AWS access key. |\n| `\"X-AWS-Secret-Key\"` | `\"YOUR-AWS-API-SECRET-KEY\"` | Your AWS secret access key |\n\n## Additional information\n\n### Supported models\n\n`text2vec-aws` supports these models:\n\n- `amazon.titan-embed-text-v1`\n- `cohere.embed-english-v3`\n- `cohere.embed-multilingual-v3`\n\n### Distance metric\n\nYou can change the distance metric used for vector searches. `cosine` distance is a good starting point. For supported distance metrics, see [Distance metrics](../../config-refs/distances.md).\n\nConsult the documentation of the model you are using to see which distance metrics are appropriate.\n\n### API rate limits\n\nThis module uses your AWS credentials. API limits that restrict your AWS account also apply to the module. When the API returns a rate limited error, Weaviate returns an error message.\n\n### Import throttling\n\nIf your API access is rate limited, consider throttling imports within your application.\n\n\n  See code example\n\n\n\n\n\n## Usage example\n\nThis is an example of a `nearText` query with `text2vec-aws`.\n\n\n\n\n\n", "type": "Documentation", "name": "Retriever-vectorizer-modules Text2vec-aws", "path": "developers/weaviate/modules/retriever-vectorizer-modules/text2vec-aws.md", "link": "https://weaviate.io/developers/weaviate/modules/retriever-vectorizer-modules/text2vec-aws", "timestamp": "2024-05-08 10:50:31", "reader": "JSON", "meta": {}, "chunks": []}