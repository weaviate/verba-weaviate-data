{"text": "\n\n\n## Syntax\n\nFunctions such as `limit`, `autocut`, and `sort` modify queries at the class level.\n -->\n\n\n## Limit argument\n\nThe `limit` argument restricts the number of results. These functions support `limit`:\n\n- `Get`\n- `Explore`\n- `Aggregate`\n\n\n\n\n  Expected response\n\n```json\n{\n  \"data\": {\n    \"Get\": {\n      \"Article\": [\n        {\n          \"title\": \"Backs on the rack - Vast sums are wasted on treatments for back pain that make it worse\"\n        },\n        {\n          \"title\": \"Graham calls for swift end to impeachment trial, warns Dems against calling witnesses\"\n        },\n        {\n          \"title\": \"Through a cloud, brightly - Obituary: Paul Volcker died on December 8th\"\n        },\n        {\n          \"title\": \"Google Stadia Reviewed \\u2013 Against The Stream\"\n        },\n        {\n          \"title\": \"Managing Supply Chain Risk\"\n        }\n      ]\n    }\n  }\n}\n```\n\n\n\n## Pagination with `offset`\n\nTo return sets of results, \"pages\", use `offset` and `limit` together to specify a sub-set of the query response.\n\nFor example, to list the first ten results, set `limit: 10` and `offset: 0`. To display the next ten results, set `offset: 10`. To continue iterating over the results, increase the offset again. For more details, see [performance considerations](./additional-operators.md#performance-considerations)\n\nThe `Get` and `Explore` functions support `offset`.\n\n\n\n\n  Expected response\n\n```json\n{\n  \"data\": {\n    \"Get\": {\n      \"Article\": [\n        {\n          \"title\": \"Through a cloud, brightly - Obituary: Paul Volcker died on December 8th\"\n        },\n        {\n          \"title\": \"Google Stadia Reviewed \\u2013 Against The Stream\"\n        },\n        {\n          \"title\": \"Managing Supply Chain Risk\"\n        },\n        {\n          \"title\": \"Playing College Football In Madden\"\n        },\n        {\n          \"title\": \"The 50 best albums of 2019, No 3: Billie Eilish \\u2013 When We All Fall Asleep, Where Do We Go?\"\n        }\n      ]\n    }\n  }\n}\n```\n\n\n\n### Performance considerations\n\nPagination is not a cursor-based implementation. This has the following implications:\n\n- **Response time and system load increase as the number of pages grows**. As the offset grows, each additional page request requires a new, larger call against your collection. For example, if your `offset` and `limit` specify results from 21-30, Weaviate retrieves 30 objects and drops the first 20. On the next call, Weaviate retrieves 40 objects and drops the first 30.\n- **Resource requirements are amplified in multi-shard configurations.** Each shard retrieves a full list of objects. Each shard also drops the objects before the offset. If you have 10 shards configured and ask for results 91-100, Weaviate retrieves 1000 objects (100 per shard) and drops 990 of them.\n- **The number of objects you can retrieve is limited**. A single query returns up to `QUERY_MAXIMUM_RESULTS`. If the sum of `offset` and `limit` exceeds `QUERY_MAXIMUM_RESULTS`, Weaviate returns an error. To change the limit, edit the `QUERY_MAXIMUM_RESULTS` environment variable. If you increase `QUERY_MAXIMUM_RESULTS`, use the lowest value possible to avoid performance problems.\n - **Pagination is not stateful**. If the database state changes between calls, your pages might miss results. An insertion or a deletion will change the object count. An update could change object order. However, if there are no writes the overall results set is the same if you retrieve a large single page or many smaller ones.\n\n\n## Autocut\n\n\nThe autocut function limits results based on discontinuities in the result set. Specifically, autocut looks for discontinuities, or jumps, in result metrics such as vector distance or search score.\n\nTo use autocut, specify how many jumps there should be in your query. The query stops returning results after the specified number of jumps.\n\nFor example, consider a `nearText` search that returns objects with these distance values:\n\n `[0.1899, 0.1901, 0.191, 0.21, 0.215, 0.23]`.\n\nAutocut returns the following:\n\n- `autocut: 1`: `[0.1899, 0.1901, 0.191]`\n- `autocut: 2`:  `[0.1899, 0.1901, 0.191, 0.21, 0.215]`\n- `autocut: 3`:  `[0.1899, 0.1901, 0.191, 0.21, 0.215, 0.23]`\n\nAutocut works with these functions:\n\n- `nearXXX`\n- `bm25`\n- `hybrid`\n\nTo use autocut with the `hybrid` search, specify the `relativeScoreFusion` ranking method.\n\nAutocut is disabled by default. To explicitly disable autocut, set the number of jumps to `0` or a negative value.\n\nIf autocut is combined with the limit filter, autocut only considers the first objects returned up to the value of `limit`.\n\n\n\nSample client code:\n\n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n\n\n  Example response\n\nThe output is like this:\n\n\n\n\n\nFor more client code examples for each functional category, see these pages:\n\n- [Autocut with similarity search](../../search/similarity.md#autocut).\n- [Autocut with `bm25` search](../../search/bm25.md#autocut).\n- [Autocut with `hybrid` search](../../search/hybrid.md#autocut).\n\n\n## Cursor with `after`\n\nStarting with version `v1.18`, you can use `after` to retrieve objects sequentially. For example, you can use `after` to retrieve a complete set of objects from a collection.\n\n`after` creates a cursor that is compatible with single shard and multi-shard configurations.\n\nThe `after` function relies on object ids, and thus it only works with list queries. `after` is not compatible with `where`, `near`, `bm25`, `hybrid`, or similar searches, or in combination with filters. For those use cases, use pagination with `offset` and `limit`.\n\n\n\n\n  Expected response\n\n```json\n{\n  \"data\": {\n    \"Get\": {\n      \"Article\": [\n        {\n          \"_additional\": {\n            \"id\": \"00313a4c-4308-30b0-af4a-01773ad1752b\"\n          },\n          \"title\": \"Managing Supply Chain Risk\"\n        },\n        {\n          \"_additional\": {\n            \"id\": \"0042b9d0-20e4-334e-8f42-f297c150e8df\"\n          },\n          \"title\": \"Playing College Football In Madden\"\n        },\n        {\n          \"_additional\": {\n            \"id\": \"0047c049-cdd6-3f6e-bb89-84ae20b74f49\"\n          },\n          \"title\": \"The 50 best albums of 2019, No 3: Billie Eilish \\u2013 When We All Fall Asleep, Where Do We Go?\"\n        },\n        {\n          \"_additional\": {\n            \"id\": \"00582185-cbf4-3cd6-8c59-c2d6ec979282\"\n          },\n          \"title\": \"How artificial intelligence is transforming the global battle against human trafficking\"\n        },\n        {\n          \"_additional\": {\n            \"id\": \"0061592e-b776-33f9-8109-88a5bd41df78\"\n          },\n          \"title\": \"Masculine, feminist or neutral? The language battle that has split Spain\"\n        }\n      ]\n    }\n  }\n}\n```\n\n\n\n## Sorting\n\nAdded in `v1.13.0`.\n\nYou can sort results by any primitive property, such as `text`, `number`, or `int`. When query results, for example, `near` vector search results, have a natural order, sort functions override that order.\n\n### Sorting considerations\n\nWeaviate's sorting implementation does not lead to massive memory spikes. Weaviate does not load all object properties into memory; only the property values being sorted are kept in memory.\n\nWeaviate does not use any sorting-specific data structures on disk. When objects are sorted, Weaviate identifies the object and extracts the relevant properties. This works reasonably well for small scales (100s of thousand or millions of objects). It is expensive if you sort large lists of objects (100s of millions, billions). In the future, Weaviate may add a column-oriented storage mechanism to overcome this performance limitation.\n\n### Sort order\n\n#### boolean values\n`false` is considered smaller than `true`. `false` comes before `true` in ascending order and after `true` in descending order.\n\n#### null values\n`null` values are considered smaller than any non-`null` values. `null` values come first in ascending order and last in descending order.\n\n#### arrays\nArrays are compared by each element separately. Elements at the same position are compared to each other, starting from the beginning of an array. When Weaviate finds an array element in one array that is smaller than its counterpart in the second array, Weaviate considers the whole first array to be smaller than the second one.\n\nArrays are equal if they have the same length and all elements are equal. If one array is subset of another array it is considered smaller.\n\nExamples:\n- `[1, 2, 3] = [1, 2, 3]`\n- `[1, 2, 4]  [1, 2, 3, 4]`\n- `[1, 2, 3] \n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n\n\n\n  Expected response\n\n```json\n{\n  \"data\": {\n    \"Get\": {\n      \"JeopardyQuestion\": [\n        {\n          \"answer\": \"$5 (Lincoln Memorial in the background)\",\n          \"points\": 600,\n          \"question\": \"A sculpture by Daniel Chester French can be seen if you look carefully on the back of this current U.S. bill\"\n        },\n        {\n          \"answer\": \"(1 of 2) Juneau, Alaska or Augusta, Maine\",\n          \"points\": 0,\n          \"question\": \"1 of the 2 U.S. state capitals that begin with the names of months\"\n        },\n        {\n          \"answer\": \"(1 of 2) Juneau, Alaska or Honolulu, Hawaii\",\n          \"points\": 0,\n          \"question\": \"One of the 2 state capitals whose names end with the letter \\\"U\\\"\"\n        }\n      ]\n    }\n  }\n}\n```\n\n\n\n#### Sorting by multiple properties\n\nTo sort by more than one property, pass an array of { `path`, `order` } objects to the sort function:\n\n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n\n\n#### Metadata properties\n\nTo sort with metadata, add an underscore to the property name.\n\n| Property Name | Sort Property  Name |\n| :- | :- |\n| `id` | `_id` |\n| `creationTimeUnix` | `_creationTimeUnix` |\n| `lastUpdateTimeUnix` | `_lastUpdateTimeUnix` |\n\n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n  \n    \n  \n\n\n\n  Python client v4 property names\n\n| Property Name | Sort Property  Name |\n| :- | :- |\n| `uuid` |`_id` |\n| `creation_time` | `_creationTimeUnix` |\n| `last_update_time` | `_lastUpdateTimeUnix` |\n\n\n\n## Grouping\n\nYou can use a group to combine similar concepts (also known as _entity merging_). There are two ways of grouping semantically similar objects together, `closest` and `merge`. To return the closest concept, set `type: closest`. To combine similar entities into a single string, set `type: merge`\n\n### Variables\n\n| Variable | Required | Type | Description |\n| --------- | -------- | ---- | ----------- |\n| `type` | yes | `string` | Either `closest` or `merge` |\n| `force` | yes | `float` | The force to apply for a particular movements.Must be between `0` and `1`. `0` is no movement. `1` is maximum movement. |\n\n### Example\n\n\n\nThe query merges the results for `International New York Times`, `The New York Times Company` and `New York Times`.\n\nThe central concept in the group, `The New York Times Company`, leads the group. Related values follow in parentheses.\n\n\n  Expected response\n\n```json\n{\n  \"data\": {\n    \"Get\": {\n      \"Publication\": [\n        {\n          \"name\": \"Fox News\"\n        },\n        {\n          \"name\": \"Wired\"\n        },\n        {\n          \"name\": \"The New York Times Company (New York Times, International New York Times)\"\n        },\n        {\n          \"name\": \"Game Informer\"\n        },\n        {\n          \"name\": \"New Yorker\"\n        },\n        {\n          \"name\": \"Wall Street Journal\"\n        },\n        {\n          \"name\": \"Vogue\"\n        },\n        {\n          \"name\": \"The Economist\"\n        },\n        {\n          \"name\": \"Financial Times\"\n        },\n        {\n          \"name\": \"The Guardian\"\n        },\n        {\n          \"name\": \"CNN\"\n        }\n      ]\n    }\n  }\n}\n```\n\n\n\n\n", "type": "Documentation", "name": "Graphql Additional-operators", "path": "developers/weaviate/api/graphql/additional-operators.md", "link": "https://weaviate.io/developers/weaviate/api/graphql/additional-operators", "timestamp": "2024-05-08 10:49:17", "reader": "JSON", "meta": {}, "chunks": []}